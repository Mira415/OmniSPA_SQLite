<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<title>Admin Dashboard</title>
		<link
			href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css"
			rel="stylesheet"
		/>
		<link
			rel="stylesheet"
			href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.8.1/font/bootstrap-icons.css"
		/>
	</head>
	<body>
		<nav class="navbar navbar-expand-lg navbar-light bg-light">
			<div class="container">
				<a class="navbar-brand" href="/">
					<i class="bi bi-spa"></i> Spa Booking System - Admin
				</a>
				<a href="/" class="btn btn-outline-secondary">Back to Site</a>
			</div>
		</nav>

		<div class="container mt-3">
			{% with messages = get_flashed_messages(with_categories=true) %} {% if
			messages %} {% for category, message in messages %}
			<div
				class="alert alert-{{ category }} alert-dismissible fade show"
				role="alert"
			>
				{{ message }}
				<button
					type="button"
					class="btn-close"
					data-bs-dismiss="alert"
				></button>
			</div>
			{% endfor %} {% endif %} {% endwith %}
		</div>

		<div class="container mt-4">
			<div class="row">
				<div class="col-12">
					<h1 class="mb-4">Admin Dashboard</h1>

					<div class="row">
						<div class="col-md-6 mb-4">
							<div class="card">
								<div class="card-header bg-primary text-white">
									<h5 class="mb-0">Quick Actions</h5>
								</div>
								<div class="card-body">
									<div class="d-grid gap-2">
										<a
											href="{{ url_for('admin.create_owner') }}"
											class="btn btn-outline-primary"
										>
											<i class="bi bi-person-plus"></i> Create New Owner
										</a>
										<a
											href="{{ url_for('admin.update_spa_location') }}"
											class="btn btn-outline-primary"
										>
											<i class="bi bi-geo-alt"></i> Update Spa Location
										</a>
									</div>
								</div>
							</div>
						</div>

						<div class="col-md-6">
							<div class="card">
								<div class="card-header bg-success text-white">
									<h5 class="mb-0">Statistics</h5>
								</div>
								<div class="card-body">
									<div class="row text-center">
										<div class="col-6">
											<h3>{{ owners|length }}</h3>
											<small class="text-muted">Total Owners</small>
										</div>
										<div class="col-6">
											<h3>{{ spas|length }}</h3>
											<small class="text-muted">Total Spas</small>
										</div>
									</div>
								</div>
							</div>
						</div>
					</div>

					<div class="row mt-4">
						<div class="col-md-6">
							<div class="card">
								<div class="card-header">
									<h5 class="mb-0">Recent Owners</h5>
								</div>
								<div class="card-body">
									{% if owners %}
									<div class="list-group">
										{% for owner in owners %}
										<div class="list-group-item">
											<div
												class="d-flex justify-content-between align-items-center"
											>
												<div>
													<h6 class="mb-1">{{ owner.name }}</h6>
													<small class="text-muted">{{ owner.email }}</small>
												</div>
												<span
													class="badge bg-{{ 'success' if owner.is_verified else 'warning' }}"
												>
													{{ 'Verified' if owner.is_verified else 'Pending' }}
												</span>
											</div>
										</div>
										{% endfor %}
									</div>
									{% else %}
									<p class="text-muted">No owners found.</p>
									{% endif %}
								</div>
							</div>
						</div>

						<div class="col-md-6">
							<div class="card">
								<div class="card-header">
									<h5 class="mb-0">Recent Spas</h5>
								</div>
								<div class="card-body">
									{% if spas %}
									<div class="list-group">
										{% for spa in spas %}
										<div class="list-group-item">
											<h6 class="mb-1">{{ spa.name }}</h6>
											<small class="text-muted"
												>{{ spa.area }} â€¢ {{ spa.address }}</small
											>
											<div class="mt-2">
												<small class="text-muted">
													{% if spa.maps_embed_url %}
													<i class="bi bi-check-circle text-success"></i>
													Location set {% else %}
													<i class="bi bi-x-circle text-danger"></i> No location
													{% endif %}
												</small>
											</div>
										</div>
										{% endfor %}
									</div>
									{% else %}
									<p class="text-muted">No spas found.</p>
									{% endif %}
								</div>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>

		<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
	</body>
</html>
