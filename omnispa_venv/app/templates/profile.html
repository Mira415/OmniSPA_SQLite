<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1" />
		<link
			href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.7/dist/css/bootstrap.min.css"
			rel="stylesheet"
		/>
		<link
			href="https://getbootstrap.com/docs/5.3/assets/css/docs.css"
			rel="stylesheet"
		/>
		<title>{{ spa.name }} - Luxury Spa Experience</title>
		<script
			defer
			src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.7/dist/js/bootstrap.bundle.min.js"
		></script>
		<link
			rel="stylesheet"
			href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css"
		/>
		<link
			rel="icon"
			href="{{ url_for('static', filename='img/favicon.png')}}"
			type="image/png"
		/>
		<link
			href="{{ url_for('static', filename='css/profile.css')}}"
			rel="stylesheet"
		/>
	</head>

	<body>
		<header class="hero-section">
			<div class="container">
				<nav class="navbar navbar-custom">
					<div class="container-fluid">
						<a class="navbar-brand" href="#">
							<h2 class="mb-0" style="color: var(--primary-color)">
								<i class="bi bi-flower1"></i> {{ spa.name }}
							</h2>
						</a>
						<div>
							<a href="{{ url_for('main.index') }}" class="btn spa-btn">
								<i class="bi bi-arrow-left me-2"></i>Back to Home
							</a>
						</div>
					</div>
				</nav>

				<div class="row align-items-center py-4">
					<!-- Profile Image -->
					<div class="col-md-4 text-center">
						{% set profile_image = spa.images|selectattr("is_primary")|first %}
						<img
							src="{{ url_for('static', filename=profile_image.filepath) if profile_image else url_for('static', filename='img/default_spa.jpg') }}"
							class="rounded-circle profile-img"
							alt="{{ spa.name }} Profile"
							id="profileImagePreview"
							data-default-src="{{ url_for('static', filename='img/default_spa.jpg') }}"
						/>
					</div>

					<!-- Header Text -->
					<div class="col-md-8 text-center text-md-start mt-4 mt-md-0">
						<h1
							class="display-4 fw-bold mb-3"
							style="color: var(--primary-color)"
						>
							{{ spa.name }}
						</h1>
						<p class="lead mb-4">
							{{ spa.tagline or "Your oasis of relaxation and rejuvenation" }}
						</p>
						<div
							class="d-flex flex-wrap justify-content-center justify-content-md-start gap-3"
						></div>
					</div>
				</div>
			</div>
		</header>

		<main class="container">
			<!-- About Section -->
			<section class="profile-section mb-5">
				<div class="row">
					<div class="col-lg-8">
						<h2 class="spa-header">About Us</h2>
						<p class="mb-4">{{ spa.description }}</p>

						<div class="row mt-4">
							<div class="col-md-6 mb-3">
								<p>
									<i
										class="bi bi-geo-alt-fill me-2"
										style="color: var(--primary-color)"
									></i>
									<strong>Address:</strong> {{ spa.address }}
								</p>
							</div>
							<div class="col-md-6 mb-3">
								<p>
									<i
										class="bi bi-telephone-fill me-2"
										style="color: var(--primary-color)"
									></i>
									<strong>Phone:</strong> {{ spa.phone }}
								</p>
							</div>
							<div class="col-md-6 mb-3">
								<p>
									<i
										class="bi bi-envelope-fill me-2"
										style="color: var(--primary-color)"
									></i>
									<strong>Email:</strong> {{ spa.email }}
								</p>
							</div>
							{% if current_user.is_authenticated %} {% set owner = spa.owner %}
							{% if current_user.username == owner.username and
							current_user.email == owner.email %}
							<div class="col-md-6 mb-3">
								<a
									href="{{ url_for('edit.edit_spa', spa_id=spa.id) }}"
									class="btn spa-btn"
								>
									<i class="bi bi-pencil-fill me-2"></i>Edit Profile
								</a>
							</div>
							{% endif %} {% endif %}
						</div>
					</div>

					<div class="col-lg-4">
						<div class="bg-spa-light p-4 rounded-3 h-100">
							<h3 class="spa-header">Quick Links</h3>
							<div class="d-grid gap-2">
								<a
									href="{{ url_for('location.spa_location', spa_id=spa.id) }}"
									class="btn btn-primary"
								>
									<i class="bi bi-geo-alt me-2"></i>View Location
								</a>
								<a
									href="{{ url_for('reviews.spa_reviews', spa_id=spa.id) }}"
									class="btn btn-primary"
								>
									<i class="bi bi-star me-2"></i>Customer Reviews
								</a>
								<a
									href="{{ url_for('booking.book_spa', spa_id=spa.id) }}"
									class="btn btn-primary"
								>
									<i class="bi bi-calendar-check me-2"></i>Book Appointment
								</a>
							</div>
						</div>
					</div>
				</div>
			</section>

			<!-- Services/Features Section -->
			<section class="mb-5">
				<h2 class="spa-header text-center mb-5">
					âœ¨ Sneak a peek at what we offer
				</h2>
				<div class="row g-4">
					{% for service in spa.services[:3] %}
					<div class="col-md-4">
						<div class="feature-card">
							<span class="service-category-badge">{{ service.category }}</span>
							<span class="service-price">SCR {{ service.price }}</span>

							<div class="feature-icon">
								{% if service.category == "Massage" %}
								<i class="bi bi-flower1"></i>
								{% elif service.category == "Beauty" %}
								<i class="bi bi-scissors"></i>
								{% elif service.category == "Aromatherapy" %}
								<i class="bi bi-droplet"></i>
								{% else %}
								<i class="bi bi-brightness-high"></i>
								{% endif %}
							</div>

							<h3>{{ service.name }}</h3>
							<p class="service-description">{{ service.description }}</p>
							<p class="service-duration">
								<i class="bi bi-clock-fill me-1"></i>Duration: {{
								service.duration }}mins
							</p>
						</div>
					</div>
					{% endfor %}
				</div>
			</section>

			<!-- Operating Hours -->
			<section class="mb-5 p-4 bg-spa-light rounded-3">
				<h2 class="spa-header mb-4">
					<i class="bi bi-clock-fill me-2"></i>Operating Hours
				</h2>
				<div class="row">
					{% for hours in spa.operating_hours %}
					<div class="col-md-4">
						<div class="operating-hours-card">
							<h5 class="card-title">{{ hours.day_type|capitalize }}</h5>
							<p class="card-text mb-0">
								{{ hours.opening_time }} - {{ hours.closing_time }}
							</p>
						</div>
					</div>
					{% endfor %}
				</div>
			</section>

			<!-- Gallery -->
			<section class="mb-5">
				<h2 class="spa-header text-center mb-4">
					<i class="bi bi-images me-2"></i>Gallery
				</h2>

				{% set gallery_images = spa.images|selectattr("is_primary",
				"false")|list %} {% if gallery_images %}
				<div class="row row-cols-1 row-cols-md-2 row-cols-lg-3 g-4">
					{% for gallery_image in gallery_images %}
					<div class="col">
						<figure class="figure">
							<img
								src="{{ url_for('static', filename='uploads/' + gallery_image.filename) }}"
								class="figure-img img-fluid rounded instagram-style"
								alt="{{ spa.name }} image"
							/>
							<figcaption class="figure-caption text-center mt-2">
								{{ gallery_image.caption if gallery_image.caption else '#' +
								spa.name|replace(' ', '')|lower }}
							</figcaption>
						</figure>
					</div>
					{% endfor %}
				</div>
				{% else %}
				<div class="col-12 text-center py-4">
					<i
						class="bi bi-image"
						style="font-size: 3rem; color: var(--primary-color)"
					></i>
					<h4 class="mt-3">No images uploaded yet</h4>
					{% if current_user.is_authenticated and current_user.id ==
					spa.owner_id %}
					<p>Add images by editing your profile</p>
					{% endif %}
				</div>
				{% endif %}
			</section>

			<!-- Why choose us -->
			<section class="mb-5">
				<h2 class="spa-header text-center mb-4">
					<i class="bi bi-award me-2"></i>Why Choose Us
				</h2>
				<div class="row g-4">
					<div class="col-md-6">
						<div
							class="feature-highlight-card bg-spa-light p-4 rounded-3 h-100"
						>
							<div class="text-center">
								<i
									class="bi bi-star-fill feature-icon-large"
									style="color: var(--primary-color); font-size: 2.5rem"
								></i>
								<h4 class="mt-3">Top Quality</h4>
								<p>
									We are committed to delivering the highest standards in
									everything we do, ensuring an exceptional experience every
									time.
								</p>
							</div>
						</div>
					</div>
					<div class="col-md-6">
						<div
							class="feature-highlight-card bg-spa-light p-4 rounded-3 h-100"
						>
							<div class="text-center">
								<i
									class="bi bi-people-fill feature-icon-large"
									style="color: var(--primary-color); font-size: 2.5rem"
								></i>
								<h4 class="mt-3">Trusted Professionals</h4>
								<p>
									Our experienced team is passionate, skilled, and dedicated to
									making sure you receive the best care and service possible.
								</p>
							</div>
						</div>
					</div>
				</div>
			</section>
		</main>

		<!-- Footer -->
		<footer class="footer">
			<div class="container">
				<div class="row">
					<div class="col-md-4 mb-4 mb-md-0">
						<h4>{{ spa.name }}</h4>
						<p>Your oasis of relaxation and rejuvenation</p>
					</div>
					<div class="col-md-4 mb-4 mb-md-0">
						<h5>Contact Info</h5>
						<p><i class="bi bi-telephone me-2"></i> {{ spa.phone }}</p>
						<p><i class="bi bi-envelope me-2"></i> {{ spa.email }}</p>
						<p><i class="bi bi-geo-alt me-2"></i> {{ spa.address }}</p>
					</div>
					<div class="col-md-4">
						<h5>Follow Us</h5>
						<div class="d-flex mt-3">
							<a href="#" class="social-icon"><i class="bi bi-facebook"></i></a>
							<a href="#" class="social-icon"
								><i class="bi bi-instagram"></i
							></a>
							<a href="#" class="social-icon"><i class="bi bi-twitter"></i></a>
							<a href="#" class="social-icon"
								><i class="bi bi-pinterest"></i
							></a>
						</div>
					</div>
				</div>
				<hr class="mt-4 mb-4" style="border-color: rgba(255, 255, 255, 0.2)" />
				<div class="text-center">
					<p class="mb-0">&copy; 2023 {{ spa.name }}. All rights reserved.</p>
				</div>
			</div>
		</footer>
	</body>
</html>
